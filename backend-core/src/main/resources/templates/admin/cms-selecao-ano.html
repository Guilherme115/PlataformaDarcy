<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/base}"
      th:with="bodyClass='min-h-screen flex flex-col p-4 md:p-8'">

<head>
    <title>Base de Dados - Darcy</title>

    <th:block layout:fragment="head-extras">
        <style>
            /* Sobrescrevendo o fundo do base.html para o estilo espec√≠fico desta p√°gina */
            body {
                font-family: 'JetBrains Mono', monospace !important;
                background-color: #f0f0f0 !important;
                background-image: radial-gradient(#000 0.5px, transparent 0.5px) !important;
                background-size: 24px 24px !important;
            }

            /* Utilit√°rios de Sombra Neobrutalista */
            .neo-shadow { box-shadow: 8px 8px 0px 0px rgba(0,0,0,1); }
            .neo-shadow-hover:hover { box-shadow: 12px 12px 0px 0px rgba(0,0,0,1); }
            .neo-shadow-active:active { box-shadow: 2px 2px 0px 0px rgba(0,0,0,1); }
        </style>
    </th:block>
</head>

<body>
<div layout:fragment="content">

    <header class="w-full max-w-6xl mx-auto mb-12">
        <div class="bg-[#FF5C00] border-4 border-black p-6 shadow-[10px_10px_0px_0px_rgba(0,0,0,1)] flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-4">
                <div class="bg-black text-white text-4xl p-2 font-black border-2 border-white">D.</div>
                <div>
                    <h1 class="text-3xl font-black uppercase leading-none text-black italic">Plataforma Darcy</h1>
                    <p class="font-bold text-sm tracking-tighter uppercase mt-1 bg-black text-white px-2 inline-block">M√≥dulo de Administra√ß√£o / CMS</p>
                </div>
            </div>
            <div class="bg-white border-2 border-black p-2 font-bold text-xs uppercase">
                Status: <span class="text-green-600 animate-pulse">Online</span>
            </div>
        </div>
    </header>

    <main class="w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-8">

        <nav class="lg:w-1/4 flex flex-col gap-4">
            <h3 class="font-black uppercase text-xl mb-2 underline decoration-4 decoration-[#FF5C00]">Selecione a Etapa</h3>

            <a href="/cms?etapa=1"
               th:classappend="${etapaAtiva == 1} ? 'bg-[#BCFF00] -translate-y-1 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]' : 'bg-white shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]'"
               class="border-4 border-black p-4 font-black text-xl flex justify-between items-center transition-all hover:-translate-y-1 hover:shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] group">
                PAS 1 <span class="group-hover:translate-x-2 transition-transform">‚Üí</span>
            </a>

            <a href="/cms?etapa=2"
               th:classappend="${etapaAtiva == 2} ? 'bg-[#BCFF00] -translate-y-1 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]' : 'bg-white shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]'"
               class="border-4 border-black p-4 font-black text-xl flex justify-between items-center transition-all hover:-translate-y-1 hover:shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] group">
                PAS 2 <span class="group-hover:translate-x-2 transition-transform">‚Üí</span>
            </a>

            <a href="/cms?etapa=3"
               th:classappend="${etapaAtiva == 3} ? 'bg-[#BCFF00] -translate-y-1 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]' : 'bg-white shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]'"
               class="border-4 border-black p-4 font-black text-xl flex justify-between items-center transition-all hover:-translate-y-1 hover:shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] group">
                PAS 3 <span class="group-hover:translate-x-2 transition-transform">‚Üí</span>
            </a>
        </nav>

        <section class="lg:flex-1 bg-white border-4 border-black p-8 shadow-[12px_12px_0px_0px_rgba(0,0,0,1)]">
            <div class="flex items-center justify-between mb-8 border-b-4 border-black pb-4">
                <h2 class="text-3xl font-black uppercase">Provas Dispon√≠veis</h2>
                <span class="bg-black text-white px-3 py-1 font-bold text-sm" th:text="'ETAPA ' + ${etapaAtiva}">ETAPA 1</span>
            </div>

            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6" th:if="${!anosDisponiveis.isEmpty()}">
                <a th:each="ano : ${anosDisponiveis}"
                   th:href="@{/cms(etapa=${etapaAtiva}, ano=${ano})}"
                   class="relative group">
                    <div class="absolute inset-0 bg-black translate-x-2 translate-y-2 group-hover:translate-x-3 group-hover:translate-y-3 transition-all"></div>
                    <div class="relative bg-white border-4 border-black p-6 flex flex-col items-center justify-center transition-all group-hover:-translate-x-1 group-hover:-translate-y-1 group-active:translate-x-1 group-active:translate-y-1 group-active:bg-[#BCFF00]">
                        <span class="text-xs font-bold uppercase mb-1 opacity-50">Edi√ß√£o</span>
                        <span class="text-2xl font-black" th:text="${ano}">2013</span>
                    </div>
                </a>
            </div>

            <div th:if="${anosDisponiveis.isEmpty()}" class="py-20 flex flex-col items-center border-4 border-dashed border-black/20">
                <div class="text-6xl mb-4 text-black">üìÇ?</div>
                <p class="text-xl font-bold uppercase tracking-tighter">Nenhum dado encontrado</p>
                <p class="bg-yellow-300 border-2 border-black px-2 mt-4 font-bold text-xs uppercase text-black">A√ß√£o necess√°ria: Execute o importador de PDF</p>
            </div>
        </section>
    </main>

    <footer class="mt-auto pt-10 text-center font-bold text-xs uppercase opacity-40">
        Plataforma Darcy // v2.0 // C√≥digo Aberto
    </footer>
</div>
</body>
</html>