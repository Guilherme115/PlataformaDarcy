<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/base}"
    th:with="bodyClass='flex flex-col min-h-screen text-black font-serif p-4 md:p-8 bg-[#e5e5e5]'">

<head>
    <title>Dashboard do Aluno</title>

    <th:block layout:fragment="head-extras">
        <style>
            /* --- CARDS BRUTALISTAS ESPEC√çFICOS DO ALUNO --- */
            .card-hub {
                background: white;
                border: 3px solid black;
                box-shadow: 6px 6px 0px 0px black;
                transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            .card-hub:hover {
                transform: translate(-4px, -4px);
                box-shadow: 10px 10px 0px 0px black;
            }

            .card-hub:active {
                transform: translate(2px, 2px);
                box-shadow: 2px 2px 0px 0px black;
            }

            /* Cores de Hover Personalizadas */
            .hover-yellow:hover {
                background-color: #fffbeb;
                border-color: black;
            }

            .hover-red:hover {
                background-color: #fef2f2;
                border-color: #dc2626;
            }

            .hover-black:hover {
                background-color: #171717;
                color: white;
            }

            .hover-purple:hover {
                background-color: #faf5ff;
            }

            /* Card Desabilitado */
            .card-disabled {
                border: 2px dashed #a3a3a3;
                background-color: #f5f5f5;
                opacity: 0.6;
                cursor: not-allowed;
                background-image: repeating-linear-gradient(45deg, #f5f5f5, #f5f5f5 10px, #e5e5e5 10px, #e5e5e5 20px);
            }

            /* Badge Pulsante */
            .badge-alert {
                font-family: 'JetBrains Mono', monospace;
                font-weight: 800;
                padding: 2px 8px;
                font-size: 0.65rem;
                text-transform: uppercase;
                border: 2px solid black;
                box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.2);
                animation: pulse 2s infinite;
            }

            /* Bot√£o do Header */
            .btn-header {
                width: 2.5rem;
                height: 2.5rem;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 2px solid black;
                background: white;
                transition: all 0.2s;
                box-shadow: 2px 2px 0px 0px rgba(0, 0, 0, 1);
            }

            .btn-header:hover {
                background: black;
                color: white;
                transform: translate(-1px, -1px);
                box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 1);
            }

            @keyframes pulse {
                0% {
                    opacity: 1;
                }

                50% {
                    opacity: 0.7;
                }

                100% {
                    opacity: 1;
                }
            }

            /* --- MARQUEE --- */
            .marquee-container {
                background: black;
                color: white;
                overflow: hidden;
                white-space: nowrap;
                padding: 6px 0;
                font-family: 'JetBrains Mono', monospace;
                font-weight: 800;
                text-transform: uppercase;
                font-size: 11px;
                border-bottom: 2px solid black;
                position: relative;
                z-index: 50;
            }

            .marquee-content {
                display: inline-block;
                animation: marquee 30s linear infinite;
                padding-left: 100%;
            }

            @keyframes marquee {
                0% {
                    transform: translateX(0);
                }

                100% {
                    transform: translateX(-100%);
                }
            }

            /* --- BACKGROUND PATTERN --- */
            .bg-dots {
                background-color: #e5e5e5;
                background-image: radial-gradient(#a3a3a3 1px, transparent 1px);
                background-size: 24px 24px;
            }

            /* --- FEED CONSOLE STYLE --- */
            .feed-console {
                background-color: #171717;
                border: 2px solid black;
                color: #22c55e;
                font-family: 'JetBrains Mono', monospace;
                box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 0.2);
            }

            .feed-item {
                border-bottom: 1px dashed #404040;
                padding-bottom: 8px;
                margin-bottom: 8px;
            }

            .feed-item:last-child {
                border-bottom: none;
                margin-bottom: 0;
            }
        </style>
    </th:block>
</head>

<body class="bg-dots">
    <!-- MARQUEE BANNER -->
    <div class="marquee-container">
        <div class="marquee-content">
            üì¢ PROCESSO SELETIVO PAS 1: INSCRI√á√ïES ABERTAS EM BREVE ‚Ä¢ üö® REVIS√ÉO DE OBRAS LITER√ÅRIAS DISPON√çVEL NO TUTOR
            IA ‚Ä¢ üèÜ NOVO RANKING DE SIMULADOS ATUALIZADO ‚Ä¢ ‚ö°Ô∏è MANTENHA O FOCO, ALUNO DARCY!
        </div>
    </div>

    <div layout:fragment="content" class="p-4 md:p-8">

        <div
            class="max-w-7xl mx-auto w-full mb-6 flex justify-between items-center border-b-2 border-gray-400 pb-2 font-mono text-[10px] uppercase tracking-widest text-gray-600">
            <div class="flex items-center gap-2">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span>Sistema Online ‚Ä¢ v.2.1</span>
            </div>
            <div>Bras√≠lia, DF ‚Ä¢ <span th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy')}">DATA</span></div>
        </div>

        <header
            class="max-w-7xl mx-auto w-full mb-12 flex flex-col md:flex-row justify-between items-start md:items-end gap-6">
            <div class="flex items-end gap-5">
                <div
                    class="w-20 h-20 bg-darcy-yellow border-4 border-black flex items-center justify-center shadow-hard shrink-0">
                    <span class="font-serif font-black text-5xl text-black italic">D.</span>
                </div>
                <div class="mb-1">
                    <div
                        class="bg-black text-white px-2 py-0.5 text-[10px] font-mono font-bold inline-block mb-1 uppercase tracking-wide">
                        Ambiente do Aluno</div>
                    <h1 class="text-5xl md:text-6xl font-black italic tracking-tighter leading-[0.9]">DASHBOARD.</h1>
                </div>
            </div>

            <div class="flex flex-col items-end gap-3 w-full md:w-auto">
                <nav
                    class="flex gap-6 font-mono text-xs font-bold uppercase tracking-wide border-b-2 border-transparent pb-1">
                    <a href="#" class="hover:underline hover:text-red-600 transition">M√©todo</a>
                    <a href="/wiki" class="hover:underline hover:text-purple-600 transition">Wiki</a>
                    <a href="/tutor" class="hover:underline hover:text-yellow-600 transition text-yellow-600">Falar com
                        Darcy</a>
                </nav>

                <div class="flex items-center gap-4 bg-white border-2 border-black p-2 shadow-hard-sm">
                    <div class="text-right px-2 border-r-2 border-gray-200 pr-4 mr-2">
                        <span class="block font-bold text-sm uppercase font-sans" th:text="${nome}">ALUNO
                            VISITANTE</span>
                        <span class="block text-[10px] text-gray-500 font-mono">STATUS: ATIVO</span>
                    </div>
                    <div class="flex gap-2">
                        <a href="/perfil" class="btn-header" title="Meu Perfil"><i data-lucide="user"
                                class="w-4 h-4"></i></a>
                        <a href="/configuracoes" class="btn-header" title="Configura√ß√µes"><i data-lucide="settings"
                                class="w-4 h-4"></i></a>
                        <a href="/cms" class="btn-header hover:!bg-purple-600" title="Painel Administrativo"><i
                                data-lucide="shield" class="w-4 h-4"></i></a>
                        <form th:action="@{/logout}" method="post">
                            <button class="btn-header hover:!bg-red-600 hover:!border-red-600" title="Sair"><i
                                    data-lucide="log-out" class="w-4 h-4"></i></button>
                        </form>
                    </div>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto w-full">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
                <a href="/simulado" class="group h-full">
                    <div class="card-hub p-8 relative hover-yellow">
                        <div>
                            <div
                                class="w-14 h-14 bg-black text-white flex items-center justify-center mb-6 border-2 border-black group-hover:bg-darcy-yellow group-hover:text-black transition shadow-sm">
                                <i data-lucide="layers" class="w-7 h-7"></i>
                            </div>
                            <h2 class="text-3xl font-black uppercase mb-3 italic leading-none">Central de<br>Simulados
                            </h2>
                            <p class="font-mono text-xs text-gray-600">O seu campo de treino. Crie listas personalizadas
                                ou acesse provas antigas.</p>
                        </div>
                        <div class="mt-8 flex items-center gap-2 border-t-2 border-black pt-4">
                            <span class="text-xs font-black uppercase group-hover:underline">Acessar Central</span>
                            <i data-lucide="arrow-right"
                                class="w-4 h-4 transform group-hover:translate-x-1 transition"></i>
                        </div>
                    </div>
                </a>

                <a href="/tutor" class="group h-full">
                    <div class="card-hub p-8 relative hover-black group-hover:border-darcy-yellow transition">
                        <div
                            class="absolute top-4 right-4 badge-alert bg-darcy-yellow text-black border-black shadow-none animate-bounce">
                            IA</div>
                        <div>
                            <div
                                class="w-14 h-14 border-2 border-black bg-darcy-yellow text-black flex items-center justify-center mb-6 group-hover:bg-white group-hover:text-black transition shadow-sm">
                                <i data-lucide="bot" class="w-7 h-7"></i>
                            </div>
                            <h2
                                class="text-3xl font-black uppercase mb-3 italic group-hover:text-darcy-yellow leading-none">
                                Tutor IA<br>Darcy</h2>
                            <p class="font-mono text-xs text-gray-600 group-hover:text-gray-300">Tire d√∫vidas sobre
                                obras e mat√©rias em tempo real com nossa Intelig√™ncia Artificial.</p>
                        </div>
                        <div
                            class="mt-8 flex items-center gap-2 border-t-2 border-black group-hover:border-darcy-yellow pt-4">
                            <span
                                class="text-xs font-black uppercase group-hover:underline group-hover:text-darcy-yellow">Iniciar
                                Chat</span>
                            <i data-lucide="message-square"
                                class="w-4 h-4 transform group-hover:translate-x-1 transition group-hover:text-darcy-yellow"></i>
                        </div>
                    </div>
                </a>

                <a href="/simulado/erros" class="group h-full">
                    <div class="card-hub p-8 border-red-600 relative hover-red">
                        <div th:if="${errosPendentes > 0}"
                            class="absolute top-4 right-4 badge-alert bg-red-600 text-white shadow-sm flex items-center gap-1 border-red-800">
                            <i data-lucide="alert-circle" class="w-3 h-3"></i> <span
                                th:text="${errosPendentes}">0</span> PEND√äNCIAS
                        </div>
                        <div>
                            <div
                                class="w-14 h-14 border-2 border-red-600 text-red-600 flex items-center justify-center mb-6 bg-white group-hover:bg-red-600 group-hover:text-white transition shadow-sm">
                                <i data-lucide="target" class="w-7 h-7"></i>
                            </div>
                            <h2 class="text-3xl font-black uppercase mb-3 italic text-red-700 leading-none">Caderno
                                de<br>Erros</h2>
                            <p class="font-mono text-xs text-gray-600">Gest√£o de falhas. Triagem de quest√µes pendentes e
                                an√°lise de pontos fracos.</p>
                        </div>
                        <div class="mt-8 flex items-center gap-2 border-t-2 border-red-100 pt-4">
                            <span class="text-xs font-black uppercase group-hover:underline text-red-700">Revisar
                                Agora</span>
                            <i data-lucide="arrow-right"
                                class="w-4 h-4 transform group-hover:translate-x-1 transition text-red-700"></i>
                        </div>
                    </div>
                </a>
            </div>

            <h3
                class="font-black uppercase text-xs mb-6 flex items-center gap-2 text-gray-400 tracking-widest border-b-2 border-gray-300 pb-2 font-mono">
                <i data-lucide="globe" class="w-3 h-3"></i> Comunidade & Expans√£o
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-16">
                <a href="/wiki" class="group">
                    <div
                        class="card-hub p-6 flex flex-col justify-center items-center text-center relative overflow-hidden group select-none hover-purple transition border-2 border-black shadow-hard-sm hover:translate-x-[-2px] hover:translate-y-[-2px] hover:shadow-hard">
                        <div class="absolute top-2 right-2">
                            <span
                                class="bg-purple-600 text-white text-[9px] font-bold uppercase px-2 py-0.5 animate-pulse font-mono">NOVO</span>
                        </div>
                        <i data-lucide="library" class="w-10 h-10 text-black mb-3 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-lg">Acervo Wiki</h4>
                        <p class="text-[10px] font-mono text-gray-500 mt-2 px-4">Biblioteca colaborativa organizada por
                            Etapa e Mat√©ria.</p>
                    </div>
                </a>
                <a href="/planos" class="group">
                    <div
                        class="card-hub p-6 flex flex-col justify-center items-center text-center relative overflow-hidden group select-none hover-yellow transition border-2 border-black shadow-hard-sm hover:translate-x-[-2px] hover:translate-y-[-2px] hover:shadow-hard">
                        <div class="absolute top-2 right-2">
                            <span
                                class="bg-red-600 text-white text-[9px] font-bold uppercase px-2 py-0.5 animate-pulse font-mono">-66%</span>
                        </div>
                        <i data-lucide="crown"
                            class="w-10 h-10 text-darcy-yellow mb-3 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-lg">Ver Planos</h4>
                        <p class="text-[10px] font-mono text-gray-500 mt-2 px-4">Desbloqueie o Tutor IA Darcy
                            por apenas R$19,90/m√™s.</p>
                    </div>
                </a>
                <a href="/comunidade" class="group">
                    <div
                        class="card-hub p-6 flex flex-col justify-center items-center text-center relative overflow-hidden group select-none hover-purple transition border-2 border-black shadow-hard-sm hover:translate-x-[-2px] hover:translate-y-[-2px] hover:shadow-hard">
                        <div class="absolute top-2 right-2">
                            <span
                                class="bg-purple-600 text-white text-[9px] font-bold uppercase px-2 py-0.5 animate-pulse font-mono">NOVO</span>
                        </div>
                        <i data-lucide="users"
                            class="w-10 h-10 text-purple-600 mb-3 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-lg">Comunidade</h4>
                        <p class="text-[10px] font-mono text-gray-500 mt-2 px-4">F√≥rum com alunos do PAS.
                            D√∫vidas, dicas e memes.</p>
                    </div>
                </a>
                <a href="/podcastfy" class="group">
                    <div
                        class="card-hub p-6 flex flex-col justify-center items-center text-center relative overflow-hidden group select-none hover-yellow transition border-2 border-black shadow-hard-sm hover:translate-x-[-2px] hover:translate-y-[-2px] hover:shadow-hard">
                        <div class="absolute top-2 right-2">
                            <span
                                class="bg-red-600 text-white text-[9px] font-bold uppercase px-2 py-0.5 animate-pulse font-mono">NOVO</span>
                        </div>
                        <i data-lucide="headphones"
                            class="w-10 h-10 text-black mb-3 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-lg">Podcastfy</h4>
                        <p class="text-[10px] font-mono text-gray-500 mt-2 px-4">Transforme PDFs de obras
                            em podcasts educativos com IA.</p>
                    </div>
                </a>
                <a href="/pdf-search" class="group">
                    <div
                        class="card-hub p-6 flex flex-col justify-center items-center text-center relative overflow-hidden group select-none hover-yellow transition border-2 border-black shadow-hard-sm hover:translate-x-[-2px] hover:translate-y-[-2px] hover:shadow-hard">
                        <div class="absolute top-2 right-2">
                            <span
                                class="bg-red-600 text-white text-[9px] font-bold uppercase px-2 py-0.5 animate-pulse font-mono">NOVO</span>
                        </div>
                        <i data-lucide="file-search"
                            class="w-10 h-10 text-red-500 mb-3 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-lg">Buscar PDFs</h4>
                        <p class="text-[10px] font-mono text-gray-500 mt-2 px-4">Encontre materiais de estudo
                            na internet com IA.</p>
                    </div>
                </a>
            </div>

            <div class="border-t-4 border-black pt-8 grid grid-cols-1 md:grid-cols-12 gap-8 pb-12">
                <div class="md:col-span-3">
                    <h3 class="font-black uppercase text-xl leading-none italic">
                        <i data-lucide="rss" class="inline w-5 h-5 mr-1"></i> Feed do<br>Subsolo.
                    </h3>
                    <p class="font-mono text-[10px] text-gray-500 mt-3 max-w-[150px] border-l-2 border-gray-300 pl-2">
                        Novidades e atualiza√ß√µes do sistema em tempo real.
                    </p>
                </div>
                <div class="md:col-span-9 feed-console p-6">
                    <div class="flex items-center justify-between mb-4 border-b border-gray-700 pb-2">
                        <span class="text-xs uppercase font-bold text-gray-400">/// SYSTEM_LOG_V2.0</span>
                        <div class="flex gap-2">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        </div>
                    </div>
                    <ul class="font-mono text-xs space-y-4">

                        <li th:if="${#lists.isEmpty(feed)}" class="text-gray-500 italic">
                            > Sem novas entradas no log.
                        </li>

                        <li th:each="com : ${feed}" class="feed-item flex items-start gap-3"
                            th:classappend="${comStat.index == 0} ? 'animate-pulse'">

                            <span class="font-bold shrink-0 px-1 uppercase text-[10px]" th:classappend="${com.tipo == 'ALERTA'} ? 'text-red-500 bg-red-900/30' : 
                                                 (${com.tipo == 'EVENTO'} ? 'text-purple-400 bg-purple-900/30' : 
                                                 'text-yellow-400 bg-yellow-900/30')">
                                [<span th:text="${com.tipo}">INFO</span>]
                            </span>

                            <div class="w-full">
                                <div class="flex justify-between items-start">
                                    <span class="text-white font-bold tracking-wide"
                                        th:text="${com.titulo}">T√≠tulo...</span>
                                    <span class="text-[9px] text-gray-500"
                                        th:text="${#temporals.format(com.dataEnvio, 'dd/MM HH:mm')}">Data</span>
                                </div>
                                <span class="text-gray-400 block mt-1 leading-relaxed"
                                    th:text="${com.mensagem}">Mensagem...</span>
                            </div>
                        </li>

                    </ul>
                </div>
        </main>
    </div>
</body>

</html>