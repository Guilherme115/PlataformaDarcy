<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/base}" th:with="bodyClass='flex flex-col min-h-screen text-black font-serif'">

<head>
    <title>Dashboard do Aluno</title>

    <th:block layout:fragment="head-extras">
        <style>
            /* --- CARDS BRUTALISTAS --- */
            .card-hub {
                background: white;
                border: 3px solid black;
                box-shadow: 6px 6px 0px 0px black;
                transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

            .card-hub:hover {
                transform: translate(-4px, -4px);
                box-shadow: 10px 10px 0px 0px black;
            }

            .card-hub:active {
                transform: translate(2px, 2px);
                box-shadow: 2px 2px 0px 0px black;
            }

            /* Hover Colors */
            .hover-yellow:hover {
                background-color: #fffbeb;
            }

            .hover-red:hover {
                background-color: #fef2f2;
                border-color: #dc2626;
            }

            .hover-black:hover {
                background-color: #171717;
                color: white;
            }

            .hover-purple:hover {
                background-color: #faf5ff;
            }

            /* Card Tutor IA - Especial */
            .card-tutor {
                background: linear-gradient(135deg, #171717 0%, #262626 100%);
                border: 3px solid black;
            }

            /* Badge Pulsante */
            .badge-alert {
                font-family: 'JetBrains Mono', monospace;
                font-weight: 800;
                padding: 2px 8px;
                font-size: 0.65rem;
                text-transform: uppercase;
                border: 2px solid black;
                box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.2);
            }

            /* --- MARQUEE --- */
            .marquee-container {
                background: black;
                color: white;
                overflow: hidden;
                white-space: nowrap;
                padding: 6px 0;
                font-family: 'JetBrains Mono', monospace;
                font-weight: 800;
                text-transform: uppercase;
                font-size: 11px;
                border-bottom: 3px solid #FFD700;
            }

            .marquee-content {
                display: inline-block;
                animation: marquee 30s linear infinite;
                padding-left: 100%;
            }

            @keyframes marquee {
                0% {
                    transform: translateX(0);
                }

                100% {
                    transform: translateX(-100%);
                }
            }

            /* --- BACKGROUND PATTERN --- */
            .bg-dots {
                background-color: #e5e5e5;
                background-image: radial-gradient(#a3a3a3 1px, transparent 1px);
                background-size: 24px 24px;
            }

            /* --- HERO SECTION --- */
            .hero-greeting {
                background: white;
                border: 3px solid black;
                box-shadow: 6px 6px 0px black;
            }

            /* --- FEED CONSOLE --- */
            .feed-console {
                background-color: #171717;
                border: 2px solid black;
                color: #22c55e;
                font-family: 'JetBrains Mono', monospace;
                box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 0.2);
            }

            .feed-item {
                border-bottom: 1px dashed #404040;
                padding-bottom: 8px;
                margin-bottom: 8px;
            }

            .feed-item:last-child {
                border-bottom: none;
                margin-bottom: 0;
            }
        </style>
    </th:block>
</head>

<body class="bg-dots">
    <!-- MARQUEE BANNER -->
    <div class="marquee-container">
        <div class="marquee-content">
            üì¢ PROCESSO SELETIVO PAS 1: INSCRI√á√ïES ABERTAS EM BREVE ‚Ä¢ üö® REVIS√ÉO DE OBRAS LITER√ÅRIAS DISPON√çVEL NO TUTOR
            IA ‚Ä¢ üèÜ NOVO RANKING DE SIMULADOS ATUALIZADO ‚Ä¢ ‚ö°Ô∏è MANTENHA O FOCO, ALUNO DARCY!
        </div>
    </div>

    <div layout:fragment="content" class="p-4 md:p-8">

        <!-- Status Bar -->
        <div
            class="max-w-7xl mx-auto w-full mb-6 flex justify-between items-center border-b-2 border-gray-400 pb-2 font-mono text-[10px] uppercase tracking-widest text-gray-600">
            <div class="flex items-center gap-2">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span>Sistema Online ‚Ä¢ v.2.1</span>
            </div>
            <div>Bras√≠lia, DF ‚Ä¢ <span th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy')}">DATA</span></div>
        </div>

        <!-- HERO: Sauda√ß√£o -->
        <div class="max-w-7xl mx-auto w-full mb-8">
            <div class="hero-greeting p-6 md:p-8">
                <div
                    class="bg-black text-darcy-yellow px-3 py-1 text-xs font-mono font-bold inline-block mb-3 uppercase tracking-wide">
                    Ambiente do Aluno
                </div>
                <h1 class="text-4xl md:text-5xl font-black italic tracking-tighter leading-none mb-2">
                    E a√≠, <span th:text="${#authentication.principal.nome.split(' ')[0]}">Aluno</span>! üëã
                </h1>
                <p class="font-mono text-sm text-gray-600 mt-2">
                    Pronto pra mais uma sess√£o de estudos? Vamos arrasar no PAS!
                </p>
            </div>
        </div>

        <main class="max-w-7xl mx-auto w-full">
            <!-- Cards Principais -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">

                <!-- SIMULADOS -->
                <a href="/simulado" class="group h-full">
                    <div class="card-hub p-6 md:p-8 relative hover-yellow">
                        <div>
                            <div
                                class="w-12 h-12 bg-black text-white flex items-center justify-center mb-4 border-2 border-black group-hover:bg-darcy-yellow group-hover:text-black transition">
                                <i data-lucide="layers" class="w-6 h-6"></i>
                            </div>
                            <h2 class="text-2xl font-black uppercase mb-2 italic leading-none">Central de<br>Simulados
                            </h2>
                            <p class="font-mono text-xs text-gray-600">O seu campo de treino. Crie listas personalizadas
                                ou acesse provas antigas.</p>
                        </div>
                        <div class="mt-6 flex items-center gap-2 border-t-2 border-black pt-4">
                            <span class="text-xs font-black uppercase group-hover:underline">Acessar Central</span>
                            <i data-lucide="arrow-right"
                                class="w-4 h-4 transform group-hover:translate-x-1 transition"></i>
                        </div>
                    </div>
                </a>

                <!-- TUTOR IA - Card Destaque -->
                <a href="/aluno/tutor" class="group h-full restricted-pro">
                    <div
                        class="card-tutor card-hub p-6 md:p-8 relative text-white group-hover:shadow-[10px_10px_0px_0px_#FFD700]">
                        <div
                            class="absolute top-4 right-4 badge-alert bg-darcy-yellow text-black border-black animate-bounce">
                            IA
                        </div>
                        <div class="relative z-10">
                            <div
                                class="w-12 h-12 border-2 border-darcy-yellow bg-darcy-yellow text-black flex items-center justify-center mb-4 group-hover:bg-white transition">
                                <i data-lucide="bot" class="w-6 h-6"></i>
                            </div>
                            <h2 class="text-2xl font-black uppercase mb-2 italic text-darcy-yellow leading-none">Tutor
                                IA<br>Darcy</h2>
                            <p class="font-mono text-xs text-gray-300">Tire d√∫vidas sobre obras e mat√©rias com nossa
                                Intelig√™ncia Artificial.</p>
                        </div>
                        <div class="mt-6 flex items-center gap-2 border-t-2 border-darcy-yellow pt-4 relative z-10">
                            <span class="text-xs font-black uppercase group-hover:underline text-darcy-yellow">Iniciar
                                Chat</span>
                            <i data-lucide="message-square"
                                class="w-4 h-4 transform group-hover:translate-x-1 transition text-darcy-yellow"></i>
                        </div>
                    </div>
                </a>

                <!-- CADERNO DE ERROS -->
                <a href="/simulado/erros" class="group h-full">
                    <div class="card-hub p-6 md:p-8 border-red-600 relative hover-red">
                        <div th:if="${errosPendentes > 0}"
                            class="absolute top-4 right-4 badge-alert bg-red-600 text-white flex items-center gap-1 border-red-800">
                            <i data-lucide="alert-circle" class="w-3 h-3"></i> <span
                                th:text="${errosPendentes}">0</span>
                        </div>
                        <div>
                            <div
                                class="w-12 h-12 border-2 border-red-600 text-red-600 flex items-center justify-center mb-4 bg-white group-hover:bg-red-600 group-hover:text-white transition">
                                <i data-lucide="target" class="w-6 h-6"></i>
                            </div>
                            <h2 class="text-2xl font-black uppercase mb-2 italic text-red-700 leading-none">
                                Caderno<br>de Erros</h2>
                            <p class="font-mono text-xs text-gray-600">Gest√£o de falhas. Triagem de quest√µes pendentes.
                            </p>
                        </div>
                        <div class="mt-6 flex items-center gap-2 border-t-2 border-red-100 pt-4">
                            <span class="text-xs font-black uppercase group-hover:underline text-red-700">Revisar
                                Agora</span>
                            <i data-lucide="arrow-right"
                                class="w-4 h-4 transform group-hover:translate-x-1 transition text-red-700"></i>
                        </div>
                    </div>
                </a>
            </div>

            <!-- Se√ß√£o Comunidade -->
            <h3
                class="font-black uppercase text-xs mb-4 flex items-center gap-2 text-gray-400 tracking-widest border-b-2 border-gray-300 pb-2 font-mono">
                <i data-lucide="globe" class="w-3 h-3"></i> Comunidade & Expans√£o
            </h3>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
                <!-- WIKI -->
                <a href="/wiki" class="group">
                    <div
                        class="card-hub p-4 flex flex-col justify-center items-center text-center relative overflow-hidden hover-purple transition">
                        <i data-lucide="library"
                            class="w-8 h-8 text-purple-600 mb-2 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-sm">Acervo Wiki</h4>
                        <p class="text-[9px] font-mono text-gray-500 mt-1">Biblioteca colaborativa</p>
                    </div>
                </a>

                <!-- PLANOS -->
                <a href="/planos" class="group">
                    <div
                        class="card-hub p-4 flex flex-col justify-center items-center text-center relative overflow-hidden hover-yellow transition">
                        <div class="absolute top-1 right-1">
                            <span
                                class="bg-red-600 text-white text-[8px] font-bold uppercase px-1.5 py-0.5 font-mono">-66%</span>
                        </div>
                        <i data-lucide="crown"
                            class="w-8 h-8 text-darcy-yellow mb-2 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-sm">Ver Planos</h4>
                        <p class="text-[9px] font-mono text-gray-500 mt-1">R$19,90/m√™s</p>
                    </div>
                </a>

                <!-- COMUNIDADE -->
                <a href="/comunidade" class="group">
                    <div
                        class="card-hub p-4 flex flex-col justify-center items-center text-center relative overflow-hidden hover-purple transition">
                        <i data-lucide="users"
                            class="w-8 h-8 text-purple-600 mb-2 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-sm">Comunidade</h4>
                        <p class="text-[9px] font-mono text-gray-500 mt-1">F√≥rum do PAS</p>
                    </div>
                </a>

                <!-- PODCAST -->
                <a href="/aluno/podcast" class="group restricted-pro">
                    <div
                        class="card-hub p-4 flex flex-col justify-center items-center text-center relative overflow-hidden hover-yellow transition">
                        <div class="absolute top-1 right-1">
                            <span class="bg-black text-darcy-yellow text-[8px] font-bold px-1.5 py-0.5">PRO</span>
                        </div>
                        <i data-lucide="headphones"
                            class="w-8 h-8 text-black mb-2 group-hover:scale-110 transition"></i>
                        <h4 class="font-black uppercase text-black text-sm">Podcastfy</h4>
                        <p class="text-[9px] font-mono text-gray-500 mt-1">PDFs em √°udio</p>
                    </div>
                </a>
            </div>

            <!-- Feed do Subsolo -->
            <div class="border-t-4 border-black pt-8 grid grid-cols-1 md:grid-cols-12 gap-6 pb-12">
                <div class="md:col-span-3">
                    <h3 class="font-black uppercase text-xl leading-none italic">
                        <i data-lucide="rss" class="inline w-5 h-5 mr-1"></i> Feed do<br>Subsolo.
                    </h3>
                    <p class="font-mono text-[10px] text-gray-500 mt-3 max-w-[150px] border-l-2 border-gray-300 pl-2">
                        Novidades e atualiza√ß√µes em tempo real.
                    </p>
                </div>
                <div class="md:col-span-9 feed-console p-6">
                    <div class="flex items-center justify-between mb-4 border-b border-gray-700 pb-2">
                        <span class="text-xs uppercase font-bold text-gray-400">/// SYSTEM_LOG</span>
                        <div class="flex gap-2">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        </div>
                    </div>
                    <ul class="font-mono text-xs space-y-4">
                        <li th:if="${#lists.isEmpty(feed)}" class="text-gray-500 italic">
                            > Sem novas entradas no log.
                        </li>
                        <li th:each="com : ${feed}" class="feed-item flex items-start gap-3"
                            th:classappend="${comStat.index == 0} ? 'animate-pulse'">
                            <span class="font-bold shrink-0 px-1 uppercase text-[10px]" th:classappend="${com.tipo == 'ALERTA'} ? 'text-red-500 bg-red-900/30' : 
                                                 (${com.tipo == 'EVENTO'} ? 'text-purple-400 bg-purple-900/30' : 
                                                 'text-yellow-400 bg-yellow-900/30')">
                                [<span th:text="${com.tipo}">INFO</span>]
                            </span>
                            <div class="w-full">
                                <div class="flex justify-between items-start">
                                    <span class="text-white font-bold tracking-wide"
                                        th:text="${com.titulo}">T√≠tulo...</span>
                                    <span class="text-[9px] text-gray-500"
                                        th:text="${#temporals.format(com.dataEnvio, 'dd/MM HH:mm')}">Data</span>
                                </div>
                                <span class="text-gray-400 block mt-1 leading-relaxed"
                                    th:text="${com.mensagem}">Mensagem...</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </main>
    </div>
</body>

</html>